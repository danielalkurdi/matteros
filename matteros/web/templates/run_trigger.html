{% extends "base.html" %}
{% block title %}New Run{% endblock %}
{% block content %}
<h2>Trigger New Run</h2>
<div class="card">
    <form id="run-form" hx-post="/api/runs" hx-target="#run-result" hx-swap="innerHTML"
          hx-headers='{"Content-Type": "application/json"}'
          hx-ext="json-enc">
        <p style="margin-bottom: 0.75rem">
            <label for="playbook" style="display:block; margin-bottom:0.25rem; color:var(--muted); font-size:0.75rem">Playbook</label>
            <select name="playbook" id="playbook" style="width:100%; max-width:400px" required>
                {% for pb in playbooks %}
                <option value="{{ pb.name }}">{{ pb.name }} â€” {{ pb.description }}</option>
                {% endfor %}
            </select>
        </p>
        <p style="margin-bottom: 0.75rem">
            <label style="display:flex; align-items:center; gap:0.5rem; font-size:0.85rem">
                <input type="checkbox" name="dry_run" checked> Dry run
            </label>
        </p>
        <button type="submit" class="btn btn-green">Start Run</button>
    </form>
</div>
<div id="run-result" class="card" style="display:none"></div>
{% endblock %}
